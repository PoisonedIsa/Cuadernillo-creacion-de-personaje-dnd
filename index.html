<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D&D Booklet (12 P치ginas) - Grimoire 4 Lines</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700;900&family=Roboto+Condensed:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --border-thick: 1.5px solid #000; --border-thin: 0.75px solid #444; }
        body { font-family: 'Roboto Condensed', sans-serif; background-color: #333; margin: 0; padding: 20px; display: flex; flex-direction: column; align-items: center; gap: 30px; }
        
        /* CONTENEDOR DE HOJA */
        .sheet-wrapper { position: relative; width: 297mm; display: flex; flex-direction: column; gap: 5px; }
        .sheet-header { display: flex; justify-content: space-between; color: white; font-family: sans-serif; font-size: 12px; padding: 0 5px; }
        
        /* HOJA PRINCIPAL */
        .sheet-landscape { 
            background: white; 
            width: 297mm; 
            height: 210mm; 
            padding: 0; 
            display: flex; 
            box-shadow: 0 0 15px rgba(0,0,0,0.5); 
            position: relative; 
            box-sizing: border-box; 
            overflow: hidden; 
            page-break-after: always; 
        }
        
        /* P츼GINA A5 */
        .page-a5 { 
            width: 148.5mm; 
            height: 210mm; 
            padding: 6mm 8mm 14mm 8mm; 
            box-sizing: border-box; 
            display: flex; 
            flex-direction: column; 
            position: relative; 
            background-color: white; 
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            z-index: 0;
        }

        .divider { position: absolute; left: 50%; top: 0; bottom: 0; border-left: 1px dashed #ccc; transform: translateX(-50%); z-index: 10; }
        
        h1, h2, h3, .header-font { font-family: 'Cinzel', serif; text-transform: uppercase; letter-spacing: 0.5px; }
        
        /* TIPOGRAF칈A */
        .title-20 { font-size: 20px !important; line-height: 1.2; font-weight: 700; }
        .text-12 { font-size: 12px !important; line-height: 1.5; } /* Mayor interlineado para lectura */
        .label-12 { font-size: 12px !important; font-weight: 700; text-transform: uppercase; color: #000; letter-spacing: 0.5px; }
        
        /* Inputs y Textos */
        input[type="text"], textarea { 
            background: transparent; 
            border: none; 
            border-bottom: 0.5px solid #888; 
            font-family: 'Roboto Condensed', sans-serif; 
            font-size: 12px; 
            font-weight: 400; 
            color: #000; 
            width: 100%; 
            padding: 0 2px; 
            margin: 0; 
            display: block; 
            height: 100%; 
            line-height: 1.5; 
            box-sizing: border-box; 
        }
        
        .text-big { font-size: 20px !important; font-weight: 900 !important; line-height: 1.1 !important; }
        input:focus, textarea:focus { outline: none; border-bottom: 1px solid #000; background: rgba(255,255,255,0.5); }
        .no-line { border-bottom: none !important; }
        .label-sm { font-size: 10px; color: #333; text-transform: uppercase; font-weight: 700; letter-spacing: 0.5px; }

        .box-border { border: var(--border-thick); border-radius: 5px; }
        .box-border-thin { border: var(--border-thin); border-radius: 3px; }
        
        /* STATS */
        .stat-box { display: flex; flex-direction: column; align-items: center; justify-content: center; border: var(--border-thick); border-radius: 6px; position: relative; background: rgba(255,255,255,0.8); z-index: 5;}
        .stat-box span { font-weight: 900; font-size: 12px; } 
        .stat-score-bubble { border: 1.5px solid black; border-radius: 50%; background: white; position: absolute; bottom: -8px; display: flex; align-items: center; justify-content: center; z-index: 10; width: 22px; height: 18px;}
        .shield-shape { background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="black" stroke-width="1.2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>') no-repeat center center; background-size: contain; }
        
        /* CHECKS & UI */
        .skill-row { font-size: 12px; display: flex; align-items: center; gap: 3px; line-height: 1.3; white-space: nowrap; font-weight: 400; margin-bottom: 0px; }
        .skill-mod-input { width: 20px !important; border-bottom: 1px solid #000 !important; text-align: center; margin-right: 3px; font-size: 12px; height: 14px; font-weight: 400; padding: 0; display: inline-block; vertical-align: middle; }
        
        .checkbox-round { width: 10px; height: 10px; border: 1px solid black; border-radius: 50%; appearance: none; cursor: pointer; flex-shrink: 0; margin-right: 2px; background: rgba(255,255,255,0.5); }
        .checkbox-round:checked { background-color: black; }
        .hex-check { width: 13px; height: 13px; border: 1px solid #000; transform: rotate(45deg); display: inline-block; margin: 2px; cursor: pointer; background: rgba(255,255,255,0.5); }
        .hex-check:checked { background: black; }
        
        .rules-box { background: rgba(247, 247, 247, 0.8); border: 1px solid #333; border-radius: 4px; padding: 6px; margin-bottom: 4px; font-size: 12px; }
        .rules-title { font-weight: 800; text-transform: uppercase; border-bottom: 1px solid #999; margin-bottom: 2px; display: block; font-size: 12px; }
        .action-item { display: flex; justify-content: space-between; margin-bottom: 1px; border-bottom: 1px dotted #ccc; padding-bottom: 0px; font-size: 12px; }
        .action-name { font-weight: 700; }
        
        /* LINED BACKGROUND - Ajustado a 20px exactos */
        .lined-bg { 
            background-image: linear-gradient(#ccc 1px, transparent 1px); 
            background-size: 100% 20px; 
            background-position: 0 19px; 
            line-height: 20px !important; 
        }
        .dot-grid { background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iMSIgY3k9IjEiIHI9IjEiIGZpbGw9IiM5OTkiLz48L3N2Zz4='); background-repeat: repeat; }
        .page-num { position: absolute; bottom: 5mm; width: 100%; left: 0; text-align: center; font-size: 12px; color: #000; font-weight: 700; font-family: 'Cinzel', serif; z-index: 50; }
        .force-border { border: 1px solid #000 !important; background: white; }

        /* --- ESTILOS DE GRIMORIO NUEVO --- */
        .spell-header-box { border: 2px solid black; border-radius: 10px; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; background: white; }
        .spell-header-title { font-size: 8px; font-weight: 700; text-align: center; text-transform: uppercase; line-height: 1; margin-top: 2px; }
        
        /* Tarjeta de Hechizo */
        .spell-card { position: relative; border-bottom: 1.5px dashed #666; padding-bottom: 8px; margin-bottom: 8px; display: flex; gap: 8px; }
        
        .spell-level-diamond { width: 32px; height: 32px; border: 2px solid black; transform: rotate(45deg); display: flex; items-center; justify-content: center; background: white; margin: 4px auto 0 auto; box-shadow: 1px 1px 2px rgba(0,0,0,0.2); }
        .spell-level-input { width: 100%; height: 100%; transform: rotate(-45deg); text-align: center; font-weight: 900; font-size: 20px; border: none !important; background: transparent; padding: 0; }
        
        .comp-check { appearance: none; width: 14px; height: 14px; border: 1.5px solid black; border-radius: 50%; display: grid; place-content: center; font-size: 10px; font-weight: bold; margin: 0; cursor: pointer; background: white; }
        .comp-check::before { content: attr(data-label); color: black; }
        .comp-check:checked { background: black; }
        .comp-check:checked::before { color: white; }

        /* Contenedor de descripci칩n fijo a 4 l칤neas (80px) */
        .desc-4-lines { height: 80px; width: 100%; }

        /* --- MODOS --- */
        .martial-content { display: none !important; }
        .magic-content { display: block !important; }
        body.mode-martial .martial-content { display: block !important; }
        body.mode-martial .magic-content { display: none !important; }

        @media print { 
            body { background: white; margin: 0; padding: 0; display: block; } 
            .sheet-container { margin: 0; page-break-after: always; }
            .sheet-landscape { margin: 0; box-shadow: none; } 
            .no-print, .sheet-controls, .fixed { display: none !important; } 
            .top-bar { display: none !important; }
            .page-a5 { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
            * { border-color: #000 !important; }
        }
    </style>
</head>
<body>

    <div class="top-bar no-print flex gap-2">
         <button id="modeToggleBtn" onclick="toggleMode()" class="bg-purple-700 text-white px-4 py-2 rounded shadow font-bold hover:bg-purple-800 text-sm flex items-center gap-2 transition-colors border-2 border-white">游댩 MODO: M츼GICO</button>
         <div class="flex-grow"></div>
         <input type="file" id="bgInput" accept="image/*" class="hidden" onchange="applyBackground(this)" style="display:none;">
         <button onclick="document.getElementById('bgInput').click()" class="bg-blue-600 text-white px-4 py-2 rounded shadow font-bold hover:bg-blue-700 text-sm flex items-center gap-2 transition-colors">SUBIR FONDO</button>
         <button onclick="downloadAllSheets()" class="bg-green-600 text-white px-4 py-2 rounded shadow font-bold hover:bg-green-700 text-sm flex items-center gap-2 transition-colors">DESCARGAR (IMG)</button>
         <button onclick="window.print()" class="bg-gray-800 text-white px-4 py-2 rounded shadow font-bold hover:bg-gray-700 text-sm flex items-center gap-2 transition-colors">IMPRIMIR</button>
    </div>

    <!-- HOJA 1: P12 & P1 -->
    <div class="sheet-wrapper">
        <div class="sheet-controls no-print"><span>Hoja 1 (P치gs 12 - 1)</span><button onclick="downloadSheet('sheet1')" class="hover:text-blue-300 underline cursor-pointer">Descargar como Imagen</button></div>
        <div id="sheet1" class="sheet-landscape">
            <div class="divider"></div>
            <!-- P츼GINA 12: MAPA -->
            <div class="page-a5">
                <h2 class="header-font font-bold text-center border-b-2 border-black mb-3 title-20">Mapa / Bocetos</h2>
                <div class="h-full w-full border border-gray-400 dot-grid rounded" style="background-color: transparent;"></div>
                <div class="page-num">12</div>
            </div>
            <!-- P츼GINA 1: PERSONAJE PRINCIPAL -->
            <div class="page-a5">
                <div class="grid grid-cols-12 gap-2 mb-2 border-b border-black pb-1 items-end">
                    <div class="col-span-10"><input type="text" class="header-font uppercase h-7 border-b-2 border-black w-full title-20"><label class="label-sm">Nombre del Personaje</label></div>
                    <div class="col-span-2 flex flex-col items-center"><div class="border border-black w-8 h-8 flex items-center justify-center rounded bg-white"><input type="text" class="text-center text-xl font-bold w-full h-full p-0 no-line text-big"></div><label class="label-sm mt-0.5">NIVEL</label></div>
                    <div class="col-span-4"><input type="text" class="h-4 text-12 w-full border-b border-gray-400"><label class="label-sm">Clase</label></div>
                    <div class="col-span-4"><input type="text" class="h-4 text-12 w-full border-b border-gray-400"><label class="label-sm">Subclase</label></div>
                    <div class="col-span-4"><input type="text" class="h-4 text-12 w-full border-b border-gray-400"><label class="label-sm">Raza</label></div>
                    <div class="col-span-4"><input type="text" class="h-4 text-12 w-full border-b border-gray-400"><label class="label-sm">Trasfondo</label></div>
                    <div class="col-span-4"><input type="text" class="h-4 text-12 w-full border-b border-gray-400"><label class="label-sm">Alineaci칩n</label></div>
                    <div class="col-span-4"><input type="text" class="h-4 text-12 w-full border-b border-gray-400"><label class="label-sm">XP</label></div>
                </div>
                <div class="flex gap-2 h-full">
                    <div class="w-[58%] flex flex-col gap-1">
                        <div class="bg-gray-50/50 p-1.5 rounded box-border-thin flex-grow flex flex-col">
                            <div class="flex justify-between items-center border-b border-gray-400 pb-1 mb-1"><span class="label-sm text-[9px]">BONO DE COMPETENCIA</span><div class="border border-black rounded-full w-7 h-7 flex items-center justify-center bg-white"><input type="text" class="text-center text-lg font-bold w-full h-full p-0 bg-transparent no-line text-big"></div></div>
                            <div class="flex-grow flex flex-col justify-around gap-0.5">
                                <div class="flex items-center gap-1 border-b border-gray-200 pb-0.5"><div class="stat-box w-12 h-12 flex-shrink-0"><span>FUE</span><input type="text" class="text-center text-lg font-bold p-0 h-5 no-line text-big"><div class="stat-score-bubble"><input type="text" class="text-center text-[10px] w-full p-0 bg-transparent no-line text-std"></div></div><div class="flex-1 pl-1"><div class="flex items-center justify-between border-b border-gray-300 mb-0.5 pb-0.5"><span class="label-sm text-[12px]">SALVACI칍N</span><div class="flex items-center"><input type="checkbox" class="checkbox-round mr-1"><input type="text" class="skill-mod-input no-line"></div></div><div class="skill-row"><input type="checkbox" class="checkbox-round"><input type="text" class="skill-mod-input no-line"> Atletismo</div></div></div>
                                <div class="flex items-start gap-1 border-b border-gray-200 pb-0.5"><div class="stat-box w-12 h-12 flex-shrink-0"><span>DES</span><input type="text" class="text-center text-lg font-bold p-0 h-5 no-line text-big"><div class="stat-score-bubble"><input type="text" class="text-center text-[10px] w-full p-0 bg-transparent no-line text-std"></div></div><div class="flex-1 pl-1"><div class="flex items-center justify-between border-b border-gray-300 mb-0.5 pb-0.5"><span class="label-sm text-[12px]">SALVACI칍N</span><div class="flex items-center"><input type="checkbox" class="checkbox-round mr-1"><input type="text" class="skill-mod-input no-line"></div></div><div class="grid grid-cols-2 gap-x-1"><div class="skill-row"><input type="checkbox" class="checkbox-round"><input type="text" class="skill-mod-input no-line"> Acrobacia</div><div class="skill-row"><input type="checkbox" class="checkbox-round"><input type="text" class="skill-mod-input no-line"> Sigilo</div><div class="skill-row"><input type="checkbox" class="checkbox-round"><input type="text" class="skill-mod-input no-line"> Jue. de Manos</div></div></div></div>
                                <div class="flex items-center gap-1 border-b border-gray-200 pb-0.5"><div class="stat-box w-12 h-12 flex-shrink-0"><span>CON</span><input type="text" class="text-center text-lg font-bold p-0 h-5 no-line text-big"><div class="stat-score-bubble"><input type="text" class="text-center text-[10px] w-full p-0 bg-transparent no-line text-std"></div></div><div class="flex-1 pl-1"><div class="flex items-center justify-between border-b border-gray-300 mb-0.5 pb-0.5"><span class="label-sm text-[12px]">SALVACI칍N</span><div class="flex items-center"><input type="checkbox" class="checkbox-round mr-1"><input type="text" class="skill-mod-input no-line"></div></div></div></div>
                                <div class="flex items-start gap-1 border-b border-gray-200 pb-0.5"><div class="stat-box w-12 h-12 flex-shrink-0"><span>INT</span><input type="text" class="text-center text-lg font-bold p-0 h-5 no-line text-big"><div class="stat-score-bubble"><input type="text" class="text-center text-[10px] w-full p-0 bg-transparent no-line text-std"></div></div><div class="flex-1 pl-1"><div class="flex items-center justify-between border-b border-gray-300 mb-0.5 pb-0.5"><span class="label-sm text-[12px]">SALVACI칍N</span><div class="flex items-center"><input type="checkbox" class="checkbox-round mr-1"><input type="text" class="skill-mod-input no-line"></div></div><div class="grid grid-cols-2 gap-x-1"><div class="skill-row"><input type="checkbox" class="checkbox-round"><input type="text" class="skill-mod-input no-line"> Arcano</div><div class="skill-row"><input type="checkbox" class="checkbox-round"><input type="text" class="skill-mod-input no-line"> Historia</div><div class="skill-row"><input type="checkbox" class="checkbox-round"><input type="text" class="skill-mod-input no-line"> Investigacion</div><div class="skill-row"><input type="checkbox" class="checkbox-round"><input type="text" class="skill-mod-input no-line"> Naturaleza</div><div class="skill-row"><input type="checkbox" class="checkbox-round"><input type="text" class="skill-mod-input no-line"> Religi칩n</div></div></div></div>
                                <div class="flex items-start gap-1 border-b border-gray-200 pb-0.5"><div class="stat-box w-12 h-12 flex-shrink-0"><span>SAB</span><input type="text" class="text-center text-lg font-bold p-0 h-5 no-line text-big"><div class="stat-score-bubble"><input type="text" class="text-center text-[10px] w-full p-0 bg-transparent no-line text-std"></div></div><div class="flex-1 pl-1"><div class="flex items-center justify-between border-b border-gray-300 mb-0.5 pb-0.5"><span class="label-sm text-[12px]">SALVACI칍N</span><div class="flex items-center"><input type="checkbox" class="checkbox-round mr-1"><input type="text" class="skill-mod-input no-line"></div></div><div class="grid grid-cols-2 gap-x-1"><div class="skill-row"><input type="checkbox" class="checkbox-round"><input type="text" class="skill-mod-input no-line"> Animales</div><div class="skill-row"><input type="checkbox" class="checkbox-round"><input type="text" class="skill-mod-input no-line"> Medicina</div><div class="skill-row"><input type="checkbox" class="checkbox-round"><input type="text" class="skill-mod-input no-line"> Percepci칩n</div><div class="skill-row"><input type="checkbox" class="checkbox-round"><input type="text" class="skill-mod-input no-line"> Perspicacia</div><div class="skill-row"><input type="checkbox" class="checkbox-round"><input type="text" class="skill-mod-input no-line"> Superviv.</div></div></div></div>
                                <div class="flex items-start gap-1"><div class="stat-box w-12 h-12 flex-shrink-0"><span>CAR</span><input type="text" class="text-center text-lg font-bold p-0 h-5 no-line text-big"><div class="stat-score-bubble"><input type="text" class="text-center w-full p-0 bg-transparent no-line text-std"></div></div><div class="flex-1 pl-1"><div class="flex items-center justify-between border-b border-gray-300 mb-0.5 pb-0.5"><span class="label-sm text-[12px]">SALVACI칍N</span><div class="flex items-center"><input type="checkbox" class="checkbox-round mr-1"><input type="text" class="skill-mod-input no-line"></div></div><div class="grid grid-cols-2 gap-x-1"><div class="skill-row"><input type="checkbox" class="checkbox-round"><input type="text" class="skill-mod-input no-line"> Enga침o</div><div class="skill-row"><input type="checkbox" class="checkbox-round"><input type="text" class="skill-mod-input no-line"> Intimidar</div><div class="skill-row"><input type="checkbox" class="checkbox-round"><input type="text" class="skill-mod-input no-line"> Interpretacion</div><div class="skill-row"><input type="checkbox" class="checkbox-round"><input type="text" class="skill-mod-input no-line"> Persuasion</div></div></div></div>
                            </div>
                            <div class="flex justify-between gap-2 mt-1">
                                <div class="border border-black p-0.5 text-center flex-[2] bg-white rounded"><span class="label-sm block text-[9px]">PERCEPCION PASIVA</span><input type="text" class="text-center text-base font-bold p-0 no-line bg-transparent text-big"></div>
                                <div class="border border-black p-0.5 text-center flex-1 bg-white rounded"><span class="label-sm block text-[9px]">INSPIRACION</span><input type="checkbox" class="mx-auto mt-1 w-4 h-4"></div>
                            </div>
                        </div>
                    </div>
                    <div class="w-[42%] flex flex-col gap-2">
                        <div class="flex items-center justify-between bg-gray-50/50 rounded p-1.5 border border-gray-300">
                            <div class="text-center w-12"><div class="shield-shape w-10 h-12 mx-auto flex items-center justify-center"><input type="text" class="text-center w-8 text-lg font-bold bg-transparent no-line text-big"></div><span class="label-sm block mt-0.5">CA</span></div>
                            <div class="text-center border box-border w-12 h-12 flex flex-col items-center justify-center bg-white rounded"><input type="text" class="text-center font-bold w-full p-0 no-line text-12"><span class="label-sm block mt-[-2px] text-[12px]">INIC.</span></div>
                            <div class="text-center border box-border w-12 h-12 flex flex-col items-center justify-center bg-white rounded"><input type="text" class="text-center font-bold w-full p-0 no-line text-12"><span class="label-sm block mt-[-2px] text-[12px]">VEL.</span></div>
                        </div>
                        <div class="box-border p-1.5 bg-white/60"><div class="flex justify-between border-b border-gray-300 pb-1 mb-1"><div class="w-1/2 text-center border-r"><label class="label-sm block text-[8px]">Vida M치xima</label><input type="text" class="text-center text-12 p-0 no-line text-std"></div><div class="w-1/2 text-center"><label class="label-sm block text-[8px]">Temporales</label><input type="text" class="text-center text-12 p-0 no-line text-std"></div></div><textarea class="w-full text-center text-3xl font-bold h-14 p-0 resize-none no-line bg-transparent text-big" style="font-size: 24px !important;"></textarea><span class="label-sm block text-center mt-1">PUNTOS DE GOLPE</span></div>
                        <div class="box-border p-1.5 bg-white/60"><div class="flex justify-between items-center border-b border-black mb-1"><span class="label-sm font-bold">DADOS GOLPE</span><span class="text-[11px] text-gray-800 font-bold">(1d____)</span></div><div class="flex gap-2"><div class="w-1/2 text-center border-r border-gray-300"><label class="label-sm block text-gray-500 text-[8px]">TOTAL</label><input type="text" class="text-center text-lg font-bold w-full p-0 no-line bg-transparent text-big"></div><div class="w-1/2 text-center"><label class="label-sm block text-gray-500 text-[8px]">RESTANTES</label><input type="text" class="text-center text-lg font-bold w-full p-0 no-line bg-transparent text-big"></div></div></div>
                        <div class="box-border p-1.5 bg-white/60"><label class="label-sm block text-center mb-1">SALVACI칍N DE MUERTE</label><div class="flex justify-between items-center mb-1 px-2"><span class="text-[10px] font-bold">칄xito</span><div class="flex gap-2"><input type="checkbox" class="checkbox-round"><input type="checkbox" class="checkbox-round"><input type="checkbox" class="checkbox-round"></div></div><div class="flex justify-between items-center px-2"><span class="text-[10px] font-bold">Fallo</span><div class="flex gap-2"><input type="checkbox" class="checkbox-round"><input type="checkbox" class="checkbox-round"><input type="checkbox" class="checkbox-round"></div></div></div>
                        <div class="flex-grow"></div>
                    </div>
                </div>
                <div class="page-num">1</div>
            </div>
    </div>

    <!-- HOJA 2 & 11 -->
    <div class="sheet-wrapper">
        <div class="sheet-controls no-print"><span>Hoja 2 (P치ginas 2 y 11)</span><button onclick="downloadSheet('sheet2')" class="hover:text-blue-300 underline cursor-pointer">Descargar como Imagen</button></div>
        <div id="sheet2" class="sheet-landscape">
            <div class="divider"></div>
            <!-- P츼GINA 2: COMBATE Y HABILIDADES -->
            <div class="page-a5">
                <h2 class="header-font font-bold text-center border-b-2 border-black mb-3 title-20">Combate y Habilidades</h2>
                <div class="box-border p-2 mb-3 bg-white/40">
                    <div class="grid grid-cols-[1fr_2.5rem_1fr] gap-2 h-6 mb-1 px-2 items-center text-xs font-bold leading-tight text-center"><div class="px-2">ARMA / CONJURO</div><div>BONO</div><div class="px-2">DA칌O / TIPO</div></div>
                    <div class="flex flex-col gap-2">
                        <div class="grid grid-cols-[1fr_2.5rem_1fr] gap-2 h-9 px-2"><div class="h-full border border-gray-300 rounded px-2 flex items-center"><input type="text" class="w-full bg-transparent no-line text-12 font-bold text-std"></div><div class="h-full border border-gray-300 rounded flex items-center justify-center"><input type="text" class="w-full bg-transparent no-line text-12 font-bold text-center text-std"></div><div class="h-full border border-gray-300 rounded px-2 flex items-center"><input type="text" class="w-full bg-transparent no-line text-12 text-std"></div></div>
                        <div class="grid grid-cols-[1fr_2.5rem_1fr] gap-2 h-9 px-2"><div class="h-full border border-gray-300 rounded px-2 flex items-center"><input type="text" class="w-full bg-transparent no-line text-12 font-bold text-std"></div><div class="h-full border border-gray-300 rounded flex items-center justify-center"><input type="text" class="w-full bg-transparent no-line text-12 font-bold text-center text-std"></div><div class="h-full border border-gray-300 rounded px-2 flex items-center"><input type="text" class="w-full bg-transparent no-line text-12 text-std"></div></div>
                        <div class="grid grid-cols-[1fr_2.5rem_1fr] gap-2 h-9 px-2"><div class="h-full border border-gray-300 rounded px-2 flex items-center"><input type="text" class="w-full bg-transparent no-line text-12 font-bold text-std"></div><div class="h-full border border-gray-300 rounded flex items-center justify-center"><input type="text" class="w-full bg-transparent no-line text-12 font-bold text-center text-std"></div><div class="h-full border border-gray-300 rounded px-2 flex items-center"><input type="text" class="w-full bg-transparent no-line text-12 text-std"></div></div>
                        <div class="grid grid-cols-[1fr_2.5rem_1fr] gap-2 h-9 px-2"><div class="h-full border border-gray-300 rounded px-2 flex items-center"><input type="text" class="w-full bg-transparent no-line text-12 font-bold text-std"></div><div class="h-full border border-gray-300 rounded flex items-center justify-center"><input type="text" class="w-full bg-transparent no-line text-12 font-bold text-center text-std"></div><div class="h-full border border-gray-300 rounded px-2 flex items-center"><input type="text" class="w-full bg-transparent no-line text-12 text-std"></div></div>
                    </div>
                </div>
                <div class="flex-grow box-border p-3 flex flex-col bg-white/40">
                    <span class="header-font text-center border-b-2 border-black mb-2 block" style="font-size: 12px !important; font-weight: bold;">RASGOS DE CLASE Y TALENTOS</span>
                    <div class="flex flex-col gap-2 mb-2">
                        <div class="flex justify-between items-center border-b border-gray-300 pb-1"><input type="text" class="w-2/3 font-bold bg-transparent no-line text-12"><div class="flex"><input type="checkbox" class="hex-check"><input type="checkbox" class="hex-check"><input type="checkbox" class="hex-check"><input type="checkbox" class="hex-check"><input type="checkbox" class="hex-check"></div></div>
                        <div class="flex justify-between items-center border-b border-gray-300 pb-1"><input type="text" class="w-2/3 font-bold bg-transparent no-line text-12"><div class="flex"><input type="checkbox" class="hex-check"><input type="checkbox" class="hex-check"><input type="checkbox" class="hex-check"><input type="checkbox" class="hex-check"><input type="checkbox" class="hex-check"></div></div>
                        <div class="flex justify-between items-center border-b border-gray-300 pb-1"><input type="text" class="w-2/3 font-bold bg-transparent no-line text-12"><div class="flex"><input type="checkbox" class="hex-check"><input type="checkbox" class="hex-check"><input type="checkbox" class="hex-check"><input type="checkbox" class="hex-check"><input type="checkbox" class="hex-check"></div></div>
                        <div class="flex justify-between items-center border-b border-gray-300 pb-1"><input type="text" class="w-2/3 font-bold bg-transparent no-line text-12"><div class="flex"><input type="checkbox" class="hex-check"><input type="checkbox" class="hex-check"><input type="checkbox" class="hex-check"><input type="checkbox" class="hex-check"><input type="checkbox" class="hex-check"></div></div>
                    </div>
                    <textarea class="w-full flex-grow border-none resize-none p-0 lined-bg bg-transparent text-12"></textarea>
                </div>
                <div class="page-num">2</div>
            </div>
            <!-- P츼GINA 11 -->
            <div class="page-a5">
                <h2 class="header-font font-bold text-center border-b-2 border-black mb-4 title-20">Compa침eros y Monturas</h2>
                <div class="flex flex-col gap-4 h-full">
                    <div class="box-border p-3 h-1/2 flex flex-col bg-white/50 rounded">
                        <div class="flex justify-between border-b border-black mb-2 pb-1"><div class="w-1/2"><label class="label-sm block">Nombre</label><input type="text" class="font-bold text-lg p-0 w-full bg-transparent no-line text-12"></div><div class="w-1/3"><label class="label-sm block text-right">Raza</label><input type="text" class="text-right text-xs p-0 w-full bg-transparent no-line text-12"></div></div>
                        <div class="flex gap-4 mb-2 justify-around"><div class="border border-gray-400 p-1 text-center w-14 bg-white rounded"><span class="label-sm block">CA</span><input type="text" class="text-center w-full font-bold text-lg border-none no-line bg-transparent text-std"></div><div class="border border-gray-400 p-1 text-center w-14 bg-white rounded"><span class="label-sm block">HP</span><input type="text" class="text-center w-full font-bold text-lg border-none no-line bg-transparent text-std"></div><div class="border border-gray-400 p-1 text-center w-14 bg-white rounded"><span class="label-sm block">VEL</span><input type="text" class="text-center w-full font-bold text-lg border-none no-line bg-transparent text-std"></div></div>
                        <div class="flex justify-between text-center mb-2 px-2">
                            <div class="flex flex-col items-center w-8"><span class="label-sm">FUE</span><div class="force-border w-full h-6 rounded"><input type="text" class="border-none w-full h-full text-center bg-transparent no-line text-12"></div></div>
                            <div class="flex flex-col items-center w-8"><span class="label-sm">DES</span><div class="force-border w-full h-6 rounded"><input type="text" class="border-none w-full h-full text-center bg-transparent no-line text-12"></div></div>
                            <div class="flex flex-col items-center w-8"><span class="label-sm">CON</span><div class="force-border w-full h-6 rounded"><input type="text" class="border-none w-full h-full text-center bg-transparent no-line text-12"></div></div>
                            <div class="flex flex-col items-center w-8"><span class="label-sm">INT</span><div class="force-border w-full h-6 rounded"><input type="text" class="border-none w-full h-full text-center bg-transparent no-line text-12"></div></div>
                            <div class="flex flex-col items-center w-8"><span class="label-sm">SAB</span><div class="force-border w-full h-6 rounded"><input type="text" class="border-none w-full h-full text-center bg-transparent no-line text-12"></div></div>
                            <div class="flex flex-col items-center w-8"><span class="label-sm">CAR</span><div class="force-border w-full h-6 rounded"><input type="text" class="border-none w-full h-full text-center bg-transparent no-line text-12"></div></div>
                        </div>
                        <textarea class="flex-grow w-full border-none p-1 resize-none bg-transparent lined-bg text-12" placeholder=""></textarea>
                    </div>
                    <div class="box-border p-3 h-1/2 flex flex-col bg-white/50 rounded">
                        <div class="flex justify-between border-b border-black mb-2 pb-1"><div class="w-1/2"><label class="label-sm block">Nombre</label><input type="text" class="font-bold text-lg p-0 w-full bg-transparent no-line text-12"></div><div class="w-1/3"><label class="label-sm block text-right">Raza</label><input type="text" class="text-right text-xs p-0 w-full bg-transparent no-line text-12"></div></div>
                        <div class="flex gap-4 mb-2 justify-around"><div class="border border-gray-400 p-1 text-center w-14 bg-white rounded"><span class="label-sm block">CA</span><input type="text" class="text-center w-full font-bold text-lg border-none no-line bg-transparent text-std"></div><div class="border border-gray-400 p-1 text-center w-14 bg-white rounded"><span class="label-sm block">HP</span><input type="text" class="text-center w-full font-bold text-lg border-none no-line bg-transparent text-std"></div><div class="border border-gray-400 p-1 text-center w-14 bg-white rounded"><span class="label-sm block">VEL</span><input type="text" class="text-center w-full font-bold text-lg border-none no-line bg-transparent text-std"></div></div>
                        <div class="flex justify-between text-center mb-2 px-2">
                            <div class="flex flex-col items-center w-8"><span class="label-sm">FUE</span><div class="force-border w-full h-6 rounded"><input type="text" class="border-none w-full h-full text-center bg-transparent no-line text-12"></div></div>
                            <div class="flex flex-col items-center w-8"><span class="label-sm">DES</span><div class="force-border w-full h-6 rounded"><input type="text" class="border-none w-full h-full text-center bg-transparent no-line text-12"></div></div>
                            <div class="flex flex-col items-center w-8"><span class="label-sm">CON</span><div class="force-border w-full h-6 rounded"><input type="text" class="border-none w-full h-full text-center bg-transparent no-line text-12"></div></div>
                            <div class="flex flex-col items-center w-8"><span class="label-sm">INT</span><div class="force-border w-full h-6 rounded"><input type="text" class="border-none w-full h-full text-center bg-transparent no-line text-12"></div></div>
                            <div class="flex flex-col items-center w-8"><span class="label-sm">SAB</span><div class="force-border w-full h-6 rounded"><input type="text" class="border-none w-full h-full text-center bg-transparent no-line text-12"></div></div>
                            <div class="flex flex-col items-center w-8"><span class="label-sm">CAR</span><div class="force-border w-full h-6 rounded"><input type="text" class="border-none w-full h-full text-center bg-transparent no-line text-12"></div></div>
                        </div>
                        <textarea class="flex-grow w-full border-none p-1 resize-none bg-transparent lined-bg text-12" placeholder=""></textarea>
                    </div>
                </div>
                <div class="page-num">11</div>
            </div>
        </div>
    </div>

    <!-- HOJA 3 & 10 -->
    <div class="sheet-wrapper">
        <div class="sheet-controls no-print"><span>Hoja 3 (P치ginas 10 y 3)</span><button onclick="downloadSheet('sheet3')" class="hover:text-blue-300 underline cursor-pointer">Descargar como Imagen</button></div>
        <div id="sheet3" class="sheet-landscape">
            <div class="divider"></div>
            <div class="page-a5">
                 <h2 class="header-font font-bold text-center border-b-2 border-black mb-4 title-20">Notas Adicionales</h2>
                 <div class="h-full w-full lined-bg box-border p-4 bg-white/40"></div>
                 <div class="page-num">10</div>
            </div>
            <div class="page-a5">
                <h2 class="header-font font-bold text-center border-b-2 border-black mb-4 title-20">Inventario y Personalidad</h2>
                <div class="w-full box-border p-3 flex flex-col h-full">
                     <div class="flex justify-between border-b border-gray-300 pb-2 mb-3 gap-2 bg-white/30 p-1">
                        <div class="flex-1 text-center bg-gray-100 rounded p-1"><span class="label-sm block">PC</span><input type="text" class="text-center font-bold no-line bg-transparent text-12"></div>
                        <div class="flex-1 text-center bg-gray-100 rounded p-1"><span class="label-sm block">PP</span><input type="text" class="text-center font-bold no-line bg-transparent text-12"></div>
                        <div class="flex-1 text-center bg-yellow-50 rounded p-1 border border-yellow-200"><span class="label-sm block">PO</span><input type="text" class="text-center font-bold no-line bg-transparent text-12"></div>
                        <div class="flex-1 text-center bg-gray-100 rounded p-1"><span class="label-sm block">PE</span><input type="text" class="text-center font-bold no-line bg-transparent text-12"></div>
                        <div class="flex-1 text-center bg-gray-100 rounded p-1"><span class="label-sm block">PT</span><input type="text" class="text-center font-bold no-line bg-transparent text-12"></div>
                    </div>
                    <textarea class="w-full flex-grow border-none resize-none p-0 leading-tight lined-bg bg-transparent mb-2 text-12"></textarea>
                    <div class="mt-2 border-t border-black pt-2 flex gap-2 h-16">
                        <div class="w-12 border border-gray-400 rounded bg-white/50 flex flex-col items-center justify-center">
                            <span class="label-sm text-[12px] block">CANT.</span>
                            <input type="text" class="text-center font-bold text-xl no-line bg-transparent w-full h-full p-0 text-12">
                        </div>
                        <div class="flex-grow border border-gray-400 rounded bg-white/50 p-1 relative">
                             <span class="label-sm block absolute top-1 left-1 text-[12px] bg-white/80 px-1">MUNICI칍N / TIPO</span>
                             <textarea class="w-full h-full text-xs border-none resize-none bg-transparent pt-4 text-12"></textarea>
                        </div>
                    </div>
                    <div class="mt-2 border-t border-black pt-2 flex gap-2 h-16">
                        <div class="w-12 border border-gray-400 rounded bg-white/50 flex flex-col items-center justify-center">
                            <span class="label-sm text-[12px] block">CANT.</span>
                            <input type="text" class="text-center font-bold text-xl no-line bg-transparent w-full h-full p-0 text-12">
                        </div>
                        <div class="flex-grow border border-gray-400 rounded bg-white/50 p-1 relative">
                            <span class="label-sm block absolute top-1 left-1 text-[12px] bg-white/80 px-1">POCIONES Y CURACI칍N</span>
                            <textarea class="w-full h-full text-xs border-none resize-none bg-transparent pt-4 text-12"></textarea>
                        </div>
                    </div>
                </div>
                <div class="page-num">3</div>
            </div>
        </div>
    </div>

    <!-- HOJA 4: P4 & P9 -->
    <div class="sheet-container">
        <div class="sheet-controls no-print"><span>Hoja 4 (P치ginas 4 y 9)</span><button onclick="downloadSheet('sheet4')" class="hover:text-blue-300 underline cursor-pointer">Descargar como Imagen</button></div>
        <div id="sheet4" class="sheet-landscape">
            <div class="divider"></div>
            <!-- P츼GINA 4 (MAGIC VS MARTIAL) -->
            <div class="page-a5">
                 <!-- HEADER M츼GICO -->
                 <div class="magic-content mb-2">
                     <div class="flex gap-2 h-20 items-stretch mb-2">
                         <div class="w-16 flex flex-col gap-1 justify-between">
                             <div class="spell-header-box"><input type="text" class="text-center title-20 border-none w-full h-full"><span class="spell-header-title">PREPARADOS</span></div>
                             <div class="spell-header-box"><input type="text" class="text-center title-20 border-none w-full h-full"><span class="spell-header-title">CONOCIDOS</span></div>
                         </div>
                         <div class="flex-grow border-2 border-black rounded-lg p-1 bg-white">
                             <div class="text-[9px] font-bold text-center border-b border-black mb-1">ESPACIOS DE CONJURO</div>
                             <div class="grid grid-cols-3 gap-x-2 text-[8px] h-full">
                                 <div class="flex flex-col gap-0.5">
                                     <div class="flex justify-between items-center"><span class="font-bold">1</span><input type="text" class="w-4 text-center border-b border-black h-3"><div class="flex gap-0.5"><input type="checkbox" class="w-2 h-2"><input type="checkbox" class="w-2 h-2"><input type="checkbox" class="w-2 h-2"><input type="checkbox" class="w-2 h-2"></div></div>
                                     <div class="flex justify-between items-center"><span class="font-bold">2</span><input type="text" class="w-4 text-center border-b border-black h-3"><div class="flex gap-0.5"><input type="checkbox" class="w-2 h-2"><input type="checkbox" class="w-2 h-2"><input type="checkbox" class="w-2 h-2"></div></div>
                                     <div class="flex justify-between items-center"><span class="font-bold">3</span><input type="text" class="w-4 text-center border-b border-black h-3"><div class="flex gap-0.5"><input type="checkbox" class="w-2 h-2"><input type="checkbox" class="w-2 h-2"><input type="checkbox" class="w-2 h-2"></div></div>
                                 </div>
                                 <div class="flex flex-col gap-0.5 border-l border-gray-300 pl-1">
                                     <div class="flex justify-between items-center"><span class="font-bold">4</span><input type="text" class="w-4 text-center border-b border-black h-3"><div class="flex gap-0.5"><input type="checkbox" class="w-2 h-2"><input type="checkbox" class="w-2 h-2"><input type="checkbox" class="w-2 h-2"></div></div>
                                     <div class="flex justify-between items-center"><span class="font-bold">5</span><input type="text" class="w-4 text-center border-b border-black h-3"><div class="flex gap-0.5"><input type="checkbox" class="w-2 h-2"><input type="checkbox" class="w-2 h-2"></div></div>
                                     <div class="flex justify-between items-center"><span class="font-bold">6</span><input type="text" class="w-4 text-center border-b border-black h-3"><div class="flex gap-0.5"><input type="checkbox" class="w-2 h-2"></div></div>
                                 </div>
                                 <div class="flex flex-col gap-0.5 border-l border-gray-300 pl-1">
                                     <div class="flex justify-between items-center"><span class="font-bold">7</span><input type="text" class="w-4 text-center border-b border-black h-3"><div class="flex gap-0.5"><input type="checkbox" class="w-2 h-2"></div></div>
                                     <div class="flex justify-between items-center"><span class="font-bold">8</span><input type="text" class="w-4 text-center border-b border-black h-3"><div class="flex gap-0.5"><input type="checkbox" class="w-2 h-2"></div></div>
                                     <div class="flex justify-between items-center"><span class="font-bold">9</span><input type="text" class="w-4 text-center border-b border-black h-3"><div class="flex gap-0.5"><input type="checkbox" class="w-2 h-2"></div></div>
                                 </div>
                             </div>
                         </div>
                         <div class="w-14 flex flex-col gap-1">
                             <div class="spell-header-box"><input type="checkbox" class="w-5 h-5 rounded-full border-2 border-black"><span class="spell-header-title text-[7px]">CONCENTRACI칍N</span></div>
                             <div class="flex gap-1 h-1/2">
                                <div class="spell-header-box w-full"><input type="text" class="text-center font-bold w-full h-full border-none text-sm text-12"><span class="spell-header-title text-[6px]">CD SALV.</span></div>
                                <div class="spell-header-box w-full"><input type="text" class="text-center font-bold w-full h-full border-none text-sm text-12"><span class="spell-header-title text-[6px]">ATAQUE</span></div>
                             </div>
                         </div>
                     </div>
                 </div>

                 <!-- CONTENIDO M츼GICO P4: 3 TARJETAS -->
                 <div class="magic-content flex flex-col h-full gap-4">
                     <script>
                        for(let i=0; i<3; i++) {
                            document.write(`
                            <div class="spell-card flex-1 flex gap-2">
                                <div class="w-10 flex flex-col items-center justify-start pt-1">
                                    <label class="label-12 mb-1 block">NIVEL</label>
                                    <div class="spell-level-diamond"><input class="spell-level-input title-20"></div>
                                </div>
                                <div class="flex-grow flex flex-col gap-1">
                                    <div class="flex items-end gap-1 mb-1">
                                        <label class="label-12">NOMBRE</label>
                                        <input class="border-b border-black flex-grow h-6 title-20">
                                    </div>
                                    <div class="flex gap-3 mb-1">
                                        <div class="w-1/2 space-y-1">
                                            <div class="flex items-end gap-1 mb-1"><label class="label-12">TIEMPO:</label><input class="border-b border-gray-400 flex-grow h-4 text-12"></div>
                                            <div class="flex items-end gap-1"><label class="label-12">DURACI칍N:</label><input class="border-b border-gray-400 flex-grow h-4 text-12"></div>
                                        </div>
                                        <div class="w-1/2 space-y-1">
                                            <div class="flex items-end gap-1 mb-1"><label class="label-12">RANGO:</label><input class="border-b border-gray-400 flex-grow h-4 text-12"></div>
                                            <div class="flex items-center gap-1 mt-0.5">
                                                <span class="label-12">COMPONENTES:</span>
                                                <label class="flex items-center gap-0.5 text-xs">V<input type="checkbox" class="comp-check" data-label="V"></label>
                                                <label class="flex items-center gap-0.5 text-xs">S<input type="checkbox" class="comp-check" data-label="S"></label>
                                                <label class="flex items-center gap-0.5 text-xs">M<input type="checkbox" class="comp-check" data-label="M"></label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="relative mt-2">
                                        <label class="label-12 absolute top-[-8px] left-0 bg-white px-1">DESCRIPCI칍N</label>
                                        <div class="w-full lined-bg pt-2 desc-4-lines">
                                            <textarea class="w-full h-full bg-transparent resize-none border-none text-12 leading-[20px] p-0"></textarea>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            `);
                        }
                     </script>
                 </div>

                <!-- CONTENIDO MARCIAL P4 -->
                <div class="martial-content h-full flex flex-col gap-3">
                     <h2 class="header-font font-bold text-center border-b-2 border-black mb-3 title-20">Recursos de Combate</h2>
                     <div class="box-border p-2 bg-gray-50/50">
                         <div class="flex justify-between items-center mb-2"><input type="text" placeholder="Recurso (Ej: Ki / Furia)" class="font-bold uppercase border-b border-black w-2/3 text-12"><div class="w-1/3 flex items-center justify-end gap-1"><span class="label-sm">Total:</span><input type="text" class="w-8 text-center border border-gray-400 rounded text-12"></div></div>
                         <div class="flex flex-wrap gap-2 justify-center p-1"><input type="checkbox" class="w-5 h-5"><input type="checkbox" class="w-5 h-5"><input type="checkbox" class="w-5 h-5"><input type="checkbox" class="w-5 h-5"><input type="checkbox" class="w-5 h-5"><input type="checkbox" class="w-5 h-5"><input type="checkbox" class="w-5 h-5"><input type="checkbox" class="w-5 h-5"><input type="checkbox" class="w-5 h-5"><input type="checkbox" class="w-5 h-5"></div>
                     </div>
                     <div class="flex-grow box-border p-3"><span class="label-sm block mb-1 border-b border-gray-300">MANIOBRAS / ESTILOS DE COMBATE</span><div class="h-full w-full lined-bg"></div></div>
                </div>
                <div class="page-num">4</div>
            </div>
            
            <!-- P츼GINA 9 -->
            <div class="page-a5">
                 <h2 class="header-font font-bold text-center border-b-2 border-black mb-3 title-20">Biograf칤a y Apariencia</h2>
                 <div class="flex flex-col gap-3 h-full">
                     <div class="flex gap-3">
                         <div class="box-border p-2 w-1/3 h-44 flex flex-col items-center justify-center border-dashed bg-gray-50"><span class="label-sm text-center text-gray-400">Pegar Retrato</span></div>
                         <div class="w-2/3 flex flex-col gap-2 justify-center">
                             <div class="flex gap-3"><div class="w-full"><label class="label-sm">Edad</label><input type="text" class="border-b border-black w-full no-line text-12"></div><div class="w-full"><label class="label-sm">Altura</label><input type="text" class="border-b border-black w-full no-line text-12"></div></div>
                             <div class="flex gap-3"><div class="w-full"><label class="label-sm">Peso</label><input type="text" class="border-b border-black w-full no-line text-12"></div><div class="w-full"><label class="label-sm">Ojos</label><input type="text" class="border-b border-black w-full no-line text-12"></div></div>
                             <div class="flex gap-3"><div class="w-full"><label class="label-sm">Piel</label><input type="text" class="border-b border-black w-full no-line text-12"></div><div class="w-full"><label class="label-sm">Cabello</label><input type="text" class="border-b border-black w-full no-line text-12"></div></div>
                             <textarea class="w-full h-full border border-gray-300 p-2 resize-none rounded bg-transparent text-12"></textarea>
                         </div>
                     </div>
                     <div class="box-border p-3 flex-grow"><span class="label-sm block mb-2 border-b border-gray-300 pb-1">Historia del Personaje</span><textarea class="w-full h-full border-none resize-none lined-bg bg-transparent text-12"></textarea></div>
                 </div>
                <div class="page-num">9</div>
            </div>
        </div>
    </div>

    <!-- HOJA 5: P8 & P5 -->
    <div class="sheet-container">
        <div class="sheet-controls no-print"><span>Hoja 5 (P치ginas 8 y 5)</span><button onclick="downloadSheet('sheet5')" class="hover:text-blue-300 underline cursor-pointer">Descargar como Imagen</button></div>
        <div id="sheet5" class="sheet-landscape">
            <div class="divider"></div>
            <!-- P츼GINA 8 -->
            <div class="page-a5">
                <h2 class="header-font font-bold text-center border-b-2 border-black mb-3 title-20">Referencia de Combate</h2>
                <div class="flex flex-col h-full gap-2">
                    <div class="rules-box"><span class="rules-title">EL TURNO (1 DE CADA)</span><ul class="list-disc list-inside leading-snug"><li><strong>Acci칩n:</strong> Atacar, Conjurar, Destrabarse, etc.</li><li><strong>Movimiento:</strong> Se puede dividir.</li><li><strong>Acci칩n Bonus:</strong> Solo si tienes la habilidad.</li><li><strong>Interacci칩n:</strong> Gratis (puerta, arma).</li></ul></div>
                    <div class="rules-box flex-grow"><span class="rules-title">ACCIONES PRINCIPALES</span><div class="action-item"><span class="action-name">Atacar</span><span>Melee / Rango</span></div><div class="action-item"><span class="action-name">Conjurar</span><span>Tiempo: 1 Acci칩n</span></div><div class="action-item"><span class="action-name">Esquivar</span><span>Desv. enemigos / Vent. DES</span></div><div class="action-item"><span class="action-name">Ayudar</span><span>Ventaja a aliado</span></div><div class="action-item"><span class="action-name">Destrabarse</span><span>Sin Atq. Oportunidad</span></div><div class="action-item"><span class="action-name">Esprintar</span><span>Doble movimiento</span></div><div class="action-item"><span class="action-name">Esconderse</span><span>Sigilo vs Percepci칩n Pasiva</span></div><div class="action-item"><span class="action-name">Preparar</span><span>Reacci칩n con trigger</span></div><div class="action-item"><span class="action-name">Usar Objeto</span><span>Poci칩n, palanca</span></div></div>
                    <div class="rules-box flex-grow"><span class="rules-title">MEC츼NICAS CLAVE</span><div class="grid grid-cols-2 gap-3 text-[12px] leading-tight"><div><p class="mb-1"><strong class="block text-black">Concentraci칩n</strong>Si recibes da침o, haz <strong>Salvaci칩n CON</strong>. <br>CD = <strong>10</strong> o <strong>Mitad del da침o</strong>.</p><p class="mb-1"><strong class="block text-black">Terreno Dif칤cil</strong>Cuesta doble movimiento.</p></div><div><p class="mb-1"><strong class="block text-black">Descanso Corto (1h)</strong>Gasta Dados de Golpe.</p><p class="mb-1"><strong class="block text-black">Descanso Largo (8h)</strong>Recupera todo.</p></div></div></div>
                </div>
                <div class="page-num">8</div>
            </div>
            <!-- P츼GINA 5 -->
            <div class="page-a5">
                <!-- CONTENIDO M츼GICO P5: 4 TARJETAS -->
                <div class="magic-content flex flex-col h-full gap-1">
                    <script>
                        for(let i=0; i<4; i++) {
                            document.write(`
                            <div class="spell-card flex-1 flex gap-2">
                                <div class="w-10 flex flex-col items-center justify-start pt-1">
                                    <label class="label-12 mb-1 block">NIVEL</label>
                                    <div class="spell-level-diamond"><input class="spell-level-input title-20"></div>
                                </div>
                                <div class="flex-grow flex flex-col gap-1">
                                    <div class="flex items-end gap-1 mb-1">
                                        <label class="label-12">NOMBRE</label>
                                        <input class="border-b border-black flex-grow h-6 title-20">
                                    </div>
                                    <div class="flex gap-3 mb-1">
                                        <div class="w-1/2 space-y-1">
                                            <div class="flex items-end gap-1 mb-1"><label class="label-12">TIEMPO:</label><input class="border-b border-gray-400 flex-grow h-4 text-12"></div>
                                            <div class="flex items-end gap-1"><label class="label-12">DURACI칍N:</label><input class="border-b border-gray-400 flex-grow h-4 text-12"></div>
                                        </div>
                                        <div class="w-1/2 space-y-1">
                                            <div class="flex items-end gap-1 mb-1"><label class="label-12">RANGO:</label><input class="border-b border-gray-400 flex-grow h-4 text-12"></div>
                                            <div class="flex items-center gap-1 mt-0.5">
                                                <span class="label-12">COMPONENTES:</span>
                                                <label class="flex items-center gap-0.5 text-xs">V<input type="checkbox" class="comp-check" data-label="V"></label>
                                                <label class="flex items-center gap-0.5 text-xs">S<input type="checkbox" class="comp-check" data-label="S"></label>
                                                <label class="flex items-center gap-0.5 text-xs">M<input type="checkbox" class="comp-check" data-label="M"></label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="relative mt-2">
                                        <label class="label-12 absolute top-[-8px] left-0 bg-white px-1">DESCRIPCI칍N</label>
                                        <div class="w-full lined-bg pt-2 desc-4-lines">
                                            <textarea class="w-full h-full bg-transparent resize-none border-none text-12 leading-[20px] p-0"></textarea>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            `);
                        }
                    </script>
                </div>
                <!-- CONTENIDO MARCIAL P5 -->
                <div class="martial-content h-full flex flex-col gap-3">
                    <h2 class="header-font font-bold text-center border-b-2 border-black mb-3 title-20">Talentos y Haza침as</h2>
                    <div class="h-full w-full lined-bg box-border p-3 bg-white/40"></div>
                </div>
                <div class="page-num">5</div>
            </div>
        </div>
    </div>

    <!-- HOJA 6: P6 & P7 -->
    <div class="sheet-container">
        <div class="sheet-controls no-print"><span>Hoja 6 (P치ginas 6 y 7)</span><button onclick="downloadSheet('sheet6')" class="hover:text-blue-300 underline cursor-pointer">Descargar como Imagen</button></div>
        <div id="sheet6" class="sheet-landscape">
            <div class="divider"></div>
            <!-- P츼GINA 6 -->
            <div class="page-a5">
                <!-- CONTENIDO M츼GICO P6: 4 TARJETAS -->
                <div class="magic-content flex flex-col h-full gap-4">
                    <script>
                        for(let i=0; i<4; i++) {
                            document.write(`
                            <div class="spell-card flex-1 flex gap-2">
                                <div class="w-10 flex flex-col items-center justify-start pt-1">
                                    <label class="label-12 mb-1 block">NIVEL</label>
                                    <div class="spell-level-diamond"><input class="spell-level-input title-20"></div>
                                </div>
                                <div class="flex-grow flex flex-col gap-1">
                                    <div class="flex items-end gap-1 mb-1">
                                        <label class="label-12">NOMBRE</label>
                                        <input class="border-b border-black flex-grow h-6 title-20">
                                    </div>
                                    <div class="flex gap-3 mb-1">
                                        <div class="w-1/2 space-y-1">
                                            <div class="flex items-end gap-1 mb-1"><label class="label-12">TIEMPO:</label><input class="border-b border-gray-400 flex-grow h-4 text-12"></div>
                                            <div class="flex items-end gap-1"><label class="label-12">DURACI칍N:</label><input class="border-b border-gray-400 flex-grow h-4 text-12"></div>
                                        </div>
                                        <div class="w-1/2 space-y-1">
                                            <div class="flex items-end gap-1 mb-1"><label class="label-12">RANGO:</label><input class="border-b border-gray-400 flex-grow h-4 text-12"></div>
                                            <div class="flex items-center gap-1 mt-0.5">
                                                <span class="label-12">COMPONENTES:</span>
                                                <label class="flex items-center gap-0.5 text-xs">V<input type="checkbox" class="comp-check" data-label="V"></label>
                                                <label class="flex items-center gap-0.5 text-xs">S<input type="checkbox" class="comp-check" data-label="S"></label>
                                                <label class="flex items-center gap-0.5 text-xs">M<input type="checkbox" class="comp-check" data-label="M"></label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="relative mt-2">
                                        <label class="label-12 absolute top-[-8px] left-0 bg-white px-1">DESCRIPCI칍N</label>
                                        <div class="w-full lined-bg pt-2 desc-4-lines">
                                            <textarea class="w-full h-full bg-transparent resize-none border-none text-12 leading-[20px] p-0"></textarea>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            `);
                        }
                    </script>
                </div>
                <!-- CONTENIDO MARCIAL P6 -->
                <div class="martial-content h-full">
                     <h2 class="header-font font-bold text-center border-b-2 border-black mb-4 title-20">Bot칤n y Notas de Batalla</h2>
                     <div class="h-full w-full lined-bg box-border p-4 bg-white/40"></div>
                </div>
                <div class="page-num">6</div>
            </div>
            <!-- P츼GINA 7 -->
            <div class="page-a5">
                 <h2 class="header-font font-bold text-center border-b-2 border-black mb-4 title-20">Diario de Campa침a</h2>
                 <div class="h-full flex flex-col gap-4">
                     <div class="box-border p-3 flex-grow"><span class="label-sm block mb-1 border-b border-gray-300">CONTACTOS Y ORGANIZACIONES</span><textarea class="w-full h-full border-none resize-none lined-bg text-12"></textarea></div>
                     <div class="box-border p-3 h-1/3"><span class="label-sm block mb-1 border-b border-gray-300">MISI칍N ACTUAL Y OBJETIVOS</span><textarea class="w-full h-full border-none resize-none lined-bg text-12"></textarea></div>
                 </div>
                 <div class="page-num">7</div>
            </div>
        </div>
    </div>

    <script>
        function applyBackground(input) {
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const pages = document.querySelectorAll('.page-a5');
                    pages.forEach(page => {
                        page.style.backgroundImage = `url('${e.target.result}')`;
                    });
                }
                reader.readAsDataURL(input.files[0]);
            }
        }

        let isMagicMode = true;
        function toggleMode() {
            isMagicMode = !isMagicMode;
            document.body.classList.toggle('mode-martial');
            const btn = document.getElementById('modeToggleBtn');
            if (isMagicMode) {
                btn.innerHTML = "游댩 MODO: M츼GICO";
                btn.className = "bg-purple-700 text-white px-4 py-2 rounded shadow font-bold hover:bg-purple-800 text-sm flex items-center gap-2 transition-colors border-2 border-white";
            } else {
                btn.innerHTML = "丘덢잺 MODO: MARCIAL";
                btn.className = "bg-red-800 text-white px-4 py-2 rounded shadow font-bold hover:bg-red-900 text-sm flex items-center gap-2 transition-colors border-2 border-white";
            }
        }

        function downloadSheet(id) {
            const element = document.getElementById(id);
            html2canvas(element, { scale: 3, useCORS: true, backgroundColor: "#ffffff", onclone: (clonedDoc) => {
                const inputs = clonedDoc.querySelectorAll('input[type="text"]');
                inputs.forEach(input => { input.style.marginTop = '-3px'; });
                const textareas = clonedDoc.querySelectorAll('textarea');
                textareas.forEach(t => { t.style.marginTop = '-2px'; });
            }}).then(canvas => {
                const link = document.createElement('a');
                link.download = `Hoja_DND_${id}.jpg`; 
                link.href = canvas.toDataURL('image/jpeg', 0.9);
                link.click();
            });
        }

        async function downloadAllSheets() {
            const sheets = document.querySelectorAll('.sheet-landscape');
            for (let i = 0; i < sheets.length; i++) {
                const sheet = sheets[i];
                const canvas = await html2canvas(sheet, { scale: 3, backgroundColor: "#ffffff", onclone: (clonedDoc) => {
                    const inputs = clonedDoc.querySelectorAll('input[type="text"]');
                    inputs.forEach(input => input.style.marginTop = '-3px');
                    const textareas = clonedDoc.querySelectorAll('textarea');
                    textareas.forEach(t => t.style.marginTop = '-2px');
                }});
                const link = document.createElement('a');
                link.download = `Hoja_DND_Pagina_${i + 1}.jpg`;
                link.href = canvas.toDataURL('image/jpeg', 0.9);
                link.click();
                await new Promise(r => setTimeout(r, 500));
            }
        }
    </script>
</body>
</html>
